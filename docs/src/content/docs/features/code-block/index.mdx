export const metadata = {
  title: "Code Blocks",
}

# Code Blocks

## Basic Usage

You can create a code block by wrapping it with three backticks (```` ``` ````).

````mdx
```ts
const greet = (name: string): string => {
  return `Hello, ${name}!`;
};

console.log(greet("World")); // Output: Hello, World!
```
````

## Features

Here are the features available for code blocks in Mercury.

Note that all of these can be used in combination.

For example, you can specify `title` and `showLineNumbers` at the same time:

````mdx
```ts title="greet.ts" showLineNumbers
const greet = (name: string): string => {
  return `Hello, ${name}!`;
};

console.log(greet("World")); // Output: Hello, World!
```
````

### Show Line Numbers

You can display line numbers by adding the `showLineNumbers` metadata to the code block.

````mdx
```ts showLineNumbers
const greet = (name: string): string => {
  return `Hello, ${name}!`;
};

console.log(greet("World")); // Output: Hello, World!
```
````

### Title

You can display a title by adding the `title="your title"` metadata to the code block.

This is useful for displaying filenames, for example.

````mdx
```ts title="greet.ts"
const greet = (name: string): string => {
  return `Hello, ${name}!`;
};

console.log(greet("World")); // Output: Hello, World!
```
````

### Line Highlighting

You can highlight specific lines by adding metadata like `{1,4-7}` to the code block.

In the following example, line 2 and lines 5 through 7 are highlighted.

````mdx
```ts {2,5-7}
const greet = (name: string): string => {
  return `Hello, ${name}!`;
};

for (const name of ["World", "Mercury", "MDX"]) {
  console.log(greet(name)); // Output: Hello, <name>!
}
```
````

Alternatively, you can highlight a line by writing `[!code highlight]` within a comment on that line.

````mdx
```ts
const greet = (name: string): string => {
  return `Hello, ${name}!`; // [\!code highlight]
};
```
````

You can also highlight multiple lines by specifying a number, like `[!code highlight:3]`.

````mdx
```ts
// [\!code highlight:3]
const greet = (name: string): string => {
  return `Hello, ${name}!`;
};
```
````

For more details, see the following:

https://shiki.style/packages/transformers#transformermetahighlight

https://shiki.style/packages/transformers#transformernotationhighlight

### Word Highlighting

You can highlight specific words by adding metadata like `/word/` to the code block.

````mdx
```ts /string/
const greet = (name: string): string => {
  return `Hello, ${name}!`;
};
```
````

Alternatively, you can highlight a word by writing `[!code word:word]` within a comment.

````mdx
```ts
// [\!code word:string]
const greet = (name: string): string => {
  return `Hello, ${name}!`;
};
```
````

For more details, see the following:

https://shiki.style/packages/transformers#transformermetawordhighlight

https://shiki.style/packages/transformers#transformernotationwordhighlight

### Diff Comparison

You can display diffs by adding the `diff` metadata to the code block.

Lines starting with `-` will be shown as deletions, and lines starting with `+` will be shown as additions.

````mdx
```ts diff
  const greet = (name: string): string => {
-   return `Hello, ${name}!`;
+   return `Hi, ${name}!`;
  };
```
````

Alternatively, you can create diffs by writing `[!code --]` and `[!code ++]` within comments.

````mdx
```ts
const greet = (name: string): string => {
  return `Hello, ${name}!`; // [\!code --]
  return `Hi, ${name}!`; // [\!code ++]
};
```
````

For more details, see the following:

https://shiki.style/packages/transformers#transformernotationdiff

## Supported Languages for Syntax Highlighting

Mercury uses [Shiki](https://shiki.style/) for syntax highlighting.

For a list of supported languages, please refer to the following page:

https://shiki.style/languages

## Options

Shiki options can be specified in the `mdx.rehypeShiki` property.

```ts title="vite.config.ts" {11-17}
import mercury from "@mercurymd/vite-plugin";
import tailwindcss from "@tailwindcss/vite";
import react from "@vitejs/plugin-react";
import { defineConfig } from "vite";

// [https://vitejs.dev/config/](https://vitejs.dev/config/)
export default defineConfig({
  plugins: [
    mercury({
      mdx: {
        rehypeShiki: {
          // write your options here...
          themes: {
            light: "github-light",
            dark: "one-dark-pro",
          },
        }
      },
    }),
    react({ include: /\.(mdx|js|jsx|ts|tsx)$/ }),
    tailwindcss(),
  ],
});
```

For more details, please refer to the following page:

https://shiki.style/packages/rehype
